<?xml version="1.0" encoding="utf-8"?>
<Page x:Class="MiraiPalette.WinUI.Views.SettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:MiraiPalette.WinUI.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:controls="using:CommunityToolkit.WinUI.Controls"
      xmlns:ui="using:CommunityToolkit.WinUI"
      xmlns:localization="using:MiraiPalette.WinUI.Strings"
      xmlns:settings="using:MiraiPalette.WinUI.Settings"
      xmlns:converters="using:MiraiPalette.WinUI.Converters"
      NavigationCacheMode="Required"
      mc:Ignorable="d">
    <Page.Resources>
        <converters:ThemeValueToNameConverter x:Name="ThemeValueToNameConverter" />
        <converters:LanguageCodeToNameConverter x:Name="LanguageCodeToNameConverter" /> 
    </Page.Resources>
    <Grid Padding="32">
        <Border>
            <TextBlock Text="{x:Bind localization:SettingsPageStrings.Title,Mode=OneTime}" Style="{ThemeResource TitleTextBlockStyle}"/>
        </Border>
        <ScrollViewer Padding="8">
            <StackPanel Orientation="Vertical" Spacing="8">
                <Rectangle Height="36"/>
                <TextBlock Text="{x:Bind localization:SettingsPageStrings.AppearanceAndBehavior,Mode=OneTime}"
                           Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                <controls:SettingsCard 
                    HeaderIcon="{ui:FontIcon Glyph=&#xE790;}" 
                    Header="{x:Bind localization:SettingsPageStrings.AppTheme_Header,Mode=OneTime}" 
                    Description="{x:Bind localization:SettingsPageStrings.AppTheme_Description,Mode=OneTime}">
                    <ComboBox SelectedItem="{x:Bind ViewModel.ThemeMode,Mode=TwoWay,Converter={StaticResource ThemeValueToNameConverter}}"
                              ItemsSource="{x:Bind ViewModel.ThemeModeOptions,Mode=OneTime}" />
                </controls:SettingsCard>
                <TextBlock Text="{x:Bind localization:SettingsPageStrings.LanguageAndRegion,Mode=OneTime}"                          
                           Style="{ThemeResource BodyStrongTextBlockStyle}" />
                <controls:SettingsCard Header="{x:Bind localization:SettingsPageStrings.Language_Header,Mode=OneTime}"
                                       HeaderIcon="{ui:FontIcon Glyph=&#xF2B7;}"
                                       Description="{x:Bind localization:SettingsPageStrings.Language_Description,Mode=OneTime}">
                    <ComboBox SelectedItem="{x:Bind ViewModel.Language,Mode=TwoWay,Converter={StaticResource LanguageCodeToNameConverter}}"
                              ItemsSource="{x:Bind ViewModel.LanguageOptions,Mode=OneTime}" />
                </controls:SettingsCard>
                <TextBlock Text="{x:Bind localization:SettingsPageStrings.About,Mode=OneTime}"
                           Style="{ThemeResource BodyStrongTextBlockStyle}" />
                <controls:SettingsExpander Header="Mirai Palette"
                                           Description="© 2025 RemeaMiku. All rights reserved">
                    <TextBlock IsTextSelectionEnabled="True" Text="0.3.9-winui" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                </controls:SettingsExpander>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
