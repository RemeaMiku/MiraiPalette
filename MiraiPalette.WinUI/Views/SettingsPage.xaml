<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="MiraiPalette.WinUI.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:converters="using:MiraiPalette.WinUI.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:globalization="using:System.Globalization"
    xmlns:helpers="using:MiraiPalette.WinUI.Helpers"
    xmlns:local="using:MiraiPalette.WinUI.Views"
    xmlns:localization="using:MiraiPalette.WinUI.Strings"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:settings="using:MiraiPalette.WinUI.Settings"
    xmlns:ui="using:CommunityToolkit.WinUI"
    x:Name="RootPage"
    NavigationCacheMode="Required"
    mc:Ignorable="d">
    <Grid Padding="32">
        <ScrollViewer Padding="8">
            <StackPanel
                Orientation="Vertical"
                Spacing="8">
                <Rectangle Height="64" />
                <TextBlock
                    Style="{ThemeResource BodyStrongTextBlockStyle}"
                    Text="{x:Bind localization:SettingsPageStrings.AppearanceAndBehavior, Mode=OneTime}" />
                <controls:SettingsCard
                    Description="{x:Bind localization:SettingsPageStrings.AppTheme_Description, Mode=OneTime}"
                    Header="{x:Bind localization:SettingsPageStrings.AppTheme_Header, Mode=OneTime}"
                    HeaderIcon="{ui:FontIcon Glyph=&#xE790;}">
                    <ComboBox
                        DisplayMemberPath="Value"
                        ItemsSource="{x:Bind ViewModel.ThemeModeOptions, Mode=OneTime}"
                        SelectedIndex="{x:Bind ViewModel.ThemeModeIndex, Mode=TwoWay}" />
                </controls:SettingsCard>
                <controls:SettingsCard
                    Description="{x:Bind localization:SettingsPageStrings.NavigationStyle_Description, Mode=OneTime}"
                    Header="{x:Bind localization:SettingsPageStrings.NavigationStyle_Header, Mode=OneTime}"
                    HeaderIcon="{ui:FontIcon Glyph=&#xF594;}">
                    <ComboBox
                        DisplayMemberPath="Value"
                        ItemsSource="{x:Bind ViewModel.NavigationStyleOptions, Mode=OneTime}"
                        SelectedIndex="{x:Bind ViewModel.NavigationStyleIndex, Mode=TwoWay}" />
                </controls:SettingsCard>
                <controls:SettingsCard
                    Description="{x:Bind localization:SettingsPageStrings.Language_Description, Mode=OneTime}"
                    Header="{x:Bind localization:SettingsPageStrings.Language_Header, Mode=OneTime}"
                    HeaderIcon="{ui:FontIcon Glyph=&#xF2B7;}">
                    <ComboBox
                        DisplayMemberPath="Value"
                        ItemsSource="{x:Bind ViewModel.LanguageOptions, Mode=OneTime}"
                        SelectedIndex="{x:Bind ViewModel.LanguageIndex, Mode=TwoWay}" />
                </controls:SettingsCard>
                <TextBlock
                    Style="{ThemeResource BodyStrongTextBlockStyle}"
                    Text="{x:Bind localization:SettingsPageStrings.About, Mode=OneTime}" />
                <controls:SettingsExpander
                    Description="© 2025 RemeaMiku. All rights reserved"
                    Header="Mirai Palette"
                    HeaderIcon="{ui:BitmapIcon Source=ms-appx:///Assets/MiraiPaletteLogo.ico}">
                    <TextBlock
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        IsTextSelectionEnabled="True"
                        Text="{x:Bind ViewModel.Version, Mode=OneTime}" />
                    <controls:SettingsExpander.Items>
                        <controls:SettingsCard
                            Padding="16"
                            HorizontalContentAlignment="Left"
                            ContentAlignment="Vertical"
                            Description="{x:Bind localization:SettingsPageStrings.DependenciesAndReferences_Description, Mode=OneTime}"
                            Header="{x:Bind localization:SettingsPageStrings.DependenciesAndReferences_Header, Mode=OneTime}"
                            HeaderIcon="{ui:FontIcon Glyph=&#xEC7A;}">
                            <StackPanel
                                Orientation="Vertical"
                                Spacing="4">
                                <HyperlinkButton
                                    Content="Windows App SDK"
                                    NavigateUri="{x:Bind helpers:BindHelper.ToFormattedUri('https://learn.microsoft.com/{0}/windows/apps/windows-app-sdk', globalization:CultureInfo.CurrentUICulture.Name), Mode=OneTime}" />
                                <HyperlinkButton
                                    Content="WinUI 3"
                                    NavigateUri="{x:Bind helpers:BindHelper.ToFormattedUri('https://learn.microsoft.com/{0}/windows/apps/winui/winui3', globalization:CultureInfo.CurrentUICulture.Name), Mode=OneTime}" />
                                <HyperlinkButton
                                    Content=".NET Community Toolkit"
                                    NavigateUri="{x:Bind helpers:BindHelper.ToFormattedUri('https://learn.microsoft.com/{0}/dotnet/communitytoolkit/introduction', globalization:CultureInfo.CurrentUICulture.Name), Mode=OneTime}" />
                                <HyperlinkButton
                                    Content="Windows Community Toolkit"
                                    NavigateUri="{x:Bind helpers:BindHelper.ToFormattedUri('https://learn.microsoft.com/{0}/dotnet/communitytoolkit/windows/', globalization:CultureInfo.CurrentUICulture.Name), Mode=OneTime}" />
                            </StackPanel>
                        </controls:SettingsCard>
                        <controls:SettingsCard
                            Padding="16"
                            ActionIcon="{ui:FontIcon Glyph=&#xE8A7;}"
                            ActionIconToolTip="{x:Bind localization:SettingsPageStrings.Developer_ActionTooltip, Mode=OneTime}"
                            Click="DeveloperPageCard_Click"
                            Description="{x:Bind localization:SettingsPageStrings.Developer_Description, Mode=OneTime}"
                            Header="{x:Bind localization:SettingsPageStrings.Developer_Header, Mode=OneTime}"
                            IsClickEnabled="True"
                            ToolTipService.ToolTip="{x:Bind localization:SettingsPageStrings.Developer_ActionTooltip}">
                            <controls:SettingsCard.HeaderIcon>
                                <ImageIcon Source="https://avatars.githubusercontent.com/u/73517033?v=4" />
                            </controls:SettingsCard.HeaderIcon>
                        </controls:SettingsCard>
                    </controls:SettingsExpander.Items>
                </controls:SettingsExpander>
                <Rectangle Height="64" />
            </StackPanel>
        </ScrollViewer>
        <Border
            Padding="16"
            VerticalAlignment="Top"
            Background="{ThemeResource DefaultAcrylicBrush}"
            CornerRadius="{ThemeResource ControlCornerRadius}">
            <TextBlock
                Style="{ThemeResource TitleTextBlockStyle}"
                Text="{x:Bind localization:SettingsPageStrings.Title, Mode=OneTime}" />
        </Border>
        <InfoBar
            Title="{x:Bind localization:SettingsPageStrings.NeedRestart, Mode=OneTime}"
            VerticalAlignment="Bottom"
            Background="{ThemeResource DefaultAcrylicBrush}"
            IsClosable="False"
            IsOpen="{x:Bind ViewModel.NeedRestartForChanges, Mode=OneWay}"
            Severity="Informational" />
    </Grid>
</Page>
